
# Interfase de Usuario: Como construirla

Ahora que ya entiende la estructura de una Shiny app, es tiempo de construir la primera desde cero.


## Objetivos

- Crear una Shiny app desde cero
- Entender los principio básico del diseño de la aplicación.

En este capítulo vamos a ver como construir una interfase de usuario para la aplicación. Aprenderá como diseñar la interfase, para luego agregar texto, imágenes y otros elementos HTML.

## Manos a la obra

Usaremos la app `MiAplicacion` del capítulo anterior. Para comenzar abra el archivo `app.R` y modifique el código para que se vea de la siguiente forma:

```
library(shiny)

# En esta sección se define la interfase de usuario y es donde haremos la mayor parte del trabajo
ui <- fluidPage(
                )

# Se define la lógica que sigue el servidor
server <- function(input, output) {
                                  }

# Ejecuta la aplición
shinyApp(ui = ui, server = server)
```

Esto código representa el mínimo posible necesario para crear un Shiny app. El resultado es bastante poco útil, es una aplicación vacía, sin contenido, con un espacio blanco donde debería estar la interfase de usuario y las salidas como tablas o gráficos. Es por esto que es un excelente punto de partida para el trabajo que vamos a realizar en este capítulo.

### Diseño (Layout)

Shiny usa la función `fluidPage` para crear el espacio que se ajusta automáticamente las dimensiones de la ventana del navegador del usuario.  Es en esta función donde se introducen los elemento necesarios para diseñar la interfase de usuario.

Por ejemplo, la función `ui` que se ve abajo, crea una interfase de usuario que tiene un panel con un título (`titlePanel`) y un diseño de barra lateral (`sidebarLayout`); incluye un panel lateral (`sidebarPanel`) y un panel principal (`mainPanel`). Hay que hacer notar que estos elemento son incluidos **dentro** de la función `fluidPage`.

```
ui <- fluidPage(
  titlePanel("Panel de Título"),
  sidebarLayout(
        sidebarPanel("Panel lateral"),
        mainPanel("Panel principal")
               )
  )
```
La Shiny app creada con esta interfase de usuario resultante se puede ver la Figura 2.1.


![Figura 2.1: Interfase de Usuario (UI) limpia y sin contenido.](imagenes/Shiny_Clear.png)

`titlePanel` y `sidebarLayout` son dos de los elemento mas populares para agregar a `fluidPage`^[Recuerde que esta es la función que crea el espacio de la UI que se ajusta al tamaño del navegados del usuario.]. Esto crea la Shiny app básica con una barra lateral.

`sidebarLayout` siempre usa dos argumentos:

- Función `sidebarPanel` que define el espacio para la barra lateral.
- Función `mainPanel` que define el espacio del panel principal. 

La barra lateral aparecerá por defecto en el lago izquierdo de la aplicación. Esta se puede mover al lado derecho agregando a la función `sidebarLayout` el argumento `position = "right"`. Este código se puede ver a continuación y el resultado en la Figura 2.2.

```
ui <- fluidPage(
  titlePanel("Panel de Título"),
   sidebarLayout(
        position = "right",
        sidebarPanel("Panel lateral"),
        mainPanel("Panel principal")
               )
  )
```

![Figura 2.2: Interfase de Usuario (UI) limpia y sin contenido, con la barra lateral a la derecha, usando el argumento `position = "right"`.](imagenes/Shiny_ClearRight.png)

`titlePanel` y `sidebarLayout` crea un diseño básico para la Shiny app, pero además se puede crear un diseño más avanzado. 
Para esto es posible usar `navbarPage` para crear en la app una interfase de usuarios multi-páginas que incluye una barra 
de navegación. Otra opción es usar `fluidRow` y `column` para construir un diseño basado en un sistema de grillas. 

Si ud. quiere aprender más sobre estas opciones avanzadas, puede encontrar la información en en la guía [Shiny Application] Layout(https://shiny.rstudio.com/articles/layout-guide.html). En este libro usaremos `sidebarLayout`.

## Contenidos HTML

En una Shiny app se puede incluir contenido agregándolo dentro de la **función del panel**. Por ejemplo, las app anteriores
despliegan una cadena de caracteres en cada uno de sus paneles. Las palabras *panel lateral* aparecen en la barra lateral, porque fueron agregados como una cadena de caracteres a la función `sidebarPanel`, e.j. `sidebarPanel("Panel lateral")`. Lo mismo es verdadero para el texto en el *panel de título* y en el *panel principal*.

Para agregar contenido mas avanzado se debe usar alguna de las funciones de identificación HTML que usar Shiny. Estas funciones son paralelas a a identificadores (*tags*) de HTML5. Aquí hay una lista de los principales para que los pruebe.

| Función en Shiny	| Equivalente HTML5 | Crea |
| - | - | - |
| `p` |`<pre>`| Párrafo de texto |
| `h1`	| `<h1>` | Título de primer orden |
| `h2`	| `<h2>`	| Título de segundo orden |
| `h3`	| `<h3>`	| Título de tercer orden |
| `h4`	| `<h4>`	| Título de cuarto orden |
| `h5`	| `<h5>`	| Título de quinto orden |
| `h6`	| `<h6>`	| Título de sexto orden |
| `a`	| `<a>`	| Hipervínculo |
| `br`	| `<br>`	| Línea |
| `div`	| `<div>`	| División en el texto con estilo uniforme |
| `span`	| `<span>`	| Una división en linea del texto con estilo uniforme |
| `pre`	| `<pre>`	| Texto 'como es' en una fuente de ancho fijo |
| `code`	| `<code>`	| Bloque de código formateado |
| `img`	| `<img>`	| Una imagen |
| `strong`	| `<strong>`	| Texto en negrita |
| `em`	| `<em>`	| Texto en cursiva |
| `HTML`	|  	| Pasa una cadena de caracteres como código HTML |


### Títulos

Para crear un título:

- Seleccionear una función de título (ej: h1 a h5)
- Ingresar el texto que se quiere ver en el título

Por ejemplo, creare un título de primer nivel que diga “Mi titulo” con `h1("Mi titulo")`. Si se ejecuta este comando en la línera de comandos, puede ver que produce un código HTML.

```
> library(shiny)
> h1("Mi titulo")
<h1>Mi titulo</h1>
```

Para agregar un elemento a tu app:

- Pasar `h1("My title")` como un agumento a `titlePanel`, `sidebarPanel` o `mainPanel`.
El texto aparecerá en el panel correspondiente de su página web. Ud. puede multiplicar los elemento en el mismo panel si los separa 
con una coma (**,**).

Practique con esto. El código siguiente usa todo los 6 nivel te títulos existentes. Actualice su _ui.R_ o _app.R_ para que produzca 
resultados similares y reinicie la aplicación. Recuerde que es necesario reiniciar la Shiny app y eso se puede hacer con 
`runApp("MiAplicacion")`, haciendo click en el botón *Run App*, o usando las cambinaciones de teclas. 

Actualice ahora el código para usar los 6 niveles de títulos disponible. Actualice el archivo _ui.R_ o _app.R_ para que sea similar 
al que se presenta a continuación. Recuerde reiniciar la Shiny app.

```
ui <- fluidPage(
  titlePanel("Mi Shiny App"),
  sidebarLayout(
    sidebarPanel(),
    mainPanel(
      h1("Titulo de primer nivel"),
      h2("Titulo de segundo nivel"),
      h3("Titulo de tercer nivel"),
      h4("Titulo de cuarto nivel"),
      h5("Titulo de quinto nivel"),
      h6("Titulo de sexto nivel")
    )
  )
)
```
> **Atención**: En algunos casos, el incluir texto con tildes dentro de una Shiny app puede causar problemas con la forma en que se 
> codifica el texto. Si le genera errores, trate removiendo los tildes.

La Sihny app resultante debería ser similar a lo que se predenta en la Fig. 2.3.

![Figura 2.3: Interfase de Usuario (UI) utilizando los 6 niveles de títulos (h1 a h6).](imagenes/Shiny_Titles.png)

Los títulos pueden ser alineado utilizando el argumento `align`. En general, casi todos los atributos de identificadores HTML pueden ser 
usados como argumento en un funcion de identificacion (tag) de Shiny.

Si ud. no tiene familiaridad con los atributos de los identificadores HTML, puede verlos en algunas de los muchos recursos que
existen en la red, por ejemplo [w3schools](http://www.w3schools.com/tags/tag_hn.asp){target=_-_new}.


## Texto con formato

Shiny ofrec muchsa funciones identificadoras para formatear texto. La forma más simple de enseñarlas es por medio de un ejemplo. 

Copie el objeto `ui` en su archivo `ui.R` o `app.R` y guárdelo. Si tu Shiny app aun está corriendo, puede refrescar la página 
web y debería mostrar los cambios. 

``` 
ui <- fluidPage(
    titlePanel("Mi Shiny App"),
    sidebarLayout(
        sidebarPanel(),
        mainPanel(
            p("p() crea un párrafo de texto."),
            p("El comando p() inicia un nuevo párrafo. Se puede entregar un atributo de estilo para cambiar el formato 
              de todo el párrafo.", style = "font-family: 'times'; font-si16pt"),
            strong("strong() hace el texto en negritas."),
            em("em() crea un texto en cursiva (ej. énfasis)."),
            br(),
            code("code() despliega su texto en forma similar a un código de computador"),
            div("div() crea segmentos de texto con un estilo similar. Esta sección del texto es azul porque se pasó 
                agumento 'style = color:blue' a la función div()", style = "color:blue"),
            br(),
            p("span() hace lo mismo que div(), pero funciona con",
              span("un grupo de palablas", style = "color:blue"),
              "que están dentro del párrafo.")
        )
    )
)
```

La Shiny app resultate con esta ui se puede ver en la fig. 2.4

![Figura 2.4: Interfase de Usuario (UI) donde se muestran ejemplos de como formatear texto.](imagenes/Shiny_FormatText.png)



